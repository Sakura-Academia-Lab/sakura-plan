<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YV5WWWG39Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-YV5WWWG39Z');
  </script>
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-PRPCBPS2');</script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#1e293b">
  <title>æ—…äººç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ (Mobile) | æ¡œã‚¢ã‚«ãƒ‡ãƒŸã‚¢</title>

  <link rel="stylesheet" href="css/style.css?v=2.9">
  <link rel="stylesheet" href="css/mobile.css?v=2.9">
</head>

<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PRPCBPS2" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>

  <header id="app-header">
    <div class="header-row row-1">
      <h1 class="app-title">æ—…äººç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ <small>Ver 2.9</small></h1>
    </div>
    <div class="header-row row-2">
      <span id="current-time-display" style="color: #fbbf24; font-weight: bold; font-size: 14px;">0.00ç§’</span>
      <button class="btn-play" onclick="startAnimation()">â–¶</button>
      <button class="btn-pause" onclick="pauseAnimation()">â¸</button>
      <button class="btn-reset" onclick="resetAnimation()">â†»</button>
      <select id="time-scale" onchange="updateTimeScale()">
        <option value="0.5">0.5x</option>
        <option value="1" selected>1x</option>
        <option value="2">2x</option>
        <option value="5">5x</option>
      </select>
      <button class="btn-toggle-controls" onclick="toggleControls()" title="è¨­å®šã¯ã“ã“ã‹ã‚‰">âš™ï¸</button>
    </div>
    <div class="header-row row-3">
      <button class="btn-help" onclick="toggleGuide()">ğŸ”° ä½¿ã„æ–¹</button>
      <a href="../index.html" class="btn-home" title="ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹">ğŸ </a>
    </div>
  </header>

  <aside id="controls" class="controls-hidden">
    <div class="ctrl-group">
      <label class="ctrl-label">ä¸¡ç«¯ã®è·é›¢ (m)</label>
      <div class="input-row">
        <input type="number" id="input-distance" value="100" min="10" max="500" step="10" onchange="updateSettings()">
        <input type="range" id="range-distance" min="10" max="500" value="100" step="10" oninput="syncDistance()">
      </div>
    </div>

    <div class="ctrl-group">
      <label class="ctrl-label">å†ç”Ÿæ™‚é–“ (ç§’)</label>
      <div class="input-row">
        <input type="number" id="input-max-time" value="60" min="10" max="300" step="10" onchange="updateSettings()">
        <input type="range" id="range-max-time" min="10" max="300" value="60" step="10" oninput="syncMaxTime()">
      </div>
    </div>

    <div class="ctrl-group">
      <label class="ctrl-label" style="color: var(--person-a-color);">äººç‰©P</label>
      <div class="input-row" style="margin-bottom: 8px;">
        <label style="min-width: 50px;">é€Ÿã•</label>
        <input type="number" id="input-speed-a" value="4" min="1" max="10" step="0.5" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">m/ç§’</span>
      </div>
      <div class="input-row">
        <input type="range" id="range-speed-a" min="1" max="10" value="4" step="0.5" oninput="syncSpeedA()">
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">é–‹å§‹</label>
        <select id="start-a" onchange="updateSettings()">
          <option value="0">å·¦ç«¯ (0m)</option>
          <option value="distance">å³ç«¯</option>
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">å‹•ä½œ</label>
        <select id="mode-a" onchange="toggleIntermittentSettings(); updateSettings();">
          <option value="roundTrip">å¾€å¾©</option>
          <option value="stopAtEdge">ç«¯ã§åœæ­¢</option>
          <option value="intermittent">é–“æ¬ ç§»å‹•</option>
        </select>
      </div>
      <div id="intermittent-a" class="intermittent-settings" style="display: none;">
        <div class="input-row" style="margin-top: 8px;">
          <label style="min-width: 80px; font-size: 11px;">ç§»å‹•æ™‚é–“</label>
          <input type="number" id="work-time-a" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
        <div class="input-row">
          <label style="min-width: 80px; font-size: 11px;">ä¼‘æ†©æ™‚é–“</label>
          <input type="number" id="rest-time-a" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
      </div>
    </div>

    <div class="ctrl-group">
      <label class="ctrl-label" style="color: var(--person-b-color);">äººç‰©Q</label>
      <div class="input-row" style="margin-bottom: 8px;">
        <label style="min-width: 50px;">é€Ÿã•</label>
        <input type="number" id="input-speed-b" value="6" min="1" max="10" step="0.5" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">m/ç§’</span>
      </div>
      <div class="input-row">
        <input type="range" id="range-speed-b" min="1" max="10" value="6" step="0.5" oninput="syncSpeedB()">
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">é–‹å§‹</label>
        <select id="start-b" onchange="updateSettings()">
          <option value="0">å·¦ç«¯ (0m)</option>
          <option value="distance" selected>å³ç«¯</option>
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">å‹•ä½œ</label>
        <select id="mode-b" onchange="toggleIntermittentSettings(); updateSettings();">
          <option value="roundTrip">å¾€å¾©</option>
          <option value="stopAtEdge">ç«¯ã§åœæ­¢</option>
          <option value="intermittent">é–“æ¬ ç§»å‹•</option>
        </select>
      </div>
      <div id="intermittent-b" class="intermittent-settings" style="display: none;">
        <div class="input-row" style="margin-top: 8px;">
          <label style="min-width: 80px; font-size: 11px;">ç§»å‹•æ™‚é–“</label>
          <input type="number" id="work-time-b" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
        <div class="input-row">
          <label style="min-width: 80px; font-size: 11px;">ä¼‘æ†©æ™‚é–“</label>
          <input type="number" id="rest-time-b" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
      </div>
    </div>

  </aside>

  <div id="animation-area">
    <div id="animation-top">
      <canvas id="animation-canvas"></canvas>
    </div>
    <div id="animation-bottom">
      <canvas id="diagram-canvas"></canvas>
    </div>
  </div>

  <div id="chart-panel">
    <div class="chart-container">
      <div class="chart-title-vertical">æ™‚é–“-è·é›¢ã‚°ãƒ©ãƒ•</div>
      <canvas id="time-distance-chart"></canvas>
    </div>
    <div class="chart-container">
      <div class="chart-title-vertical">2äººã®é–“ã®è·é›¢</div>
      <canvas id="distance-diff-chart"></canvas>
    </div>
  </div>

  <div id="guide-modal" style="display: none;">
    <div id="guide-overlay" onclick="toggleGuide()"></div>
    <div id="guide-content">
      <button class="btn-close" onclick="toggleGuide()">âœ•</button>
      <h3>ğŸ”° ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h3>
      <div id="guide-steps"></div>
    </div>
  </div>

  <script src="js/app.js?v=2.9"></script>
  <script>
    // ãƒ¢ãƒã‚¤ãƒ«ç”¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒˆã‚°ãƒ«
    function toggleControls() {
      const controls = document.getElementById('controls');
      controls.classList.toggle('controls-hidden');
    }

    // ã‚¬ã‚¤ãƒ‰è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
    function toggleGuide() {
      const modal = document.getElementById('guide-modal');
      const isVisible = modal.style.display !== 'none';

      if (isVisible) {
        modal.style.display = 'none';
      } else {
        // ç”»é¢ã‚µã‚¤ã‚ºã«å¿œã˜ã¦ã‚¬ã‚¤ãƒ‰å†…å®¹ã‚’å¤‰æ›´
        updateGuideContent();
        modal.style.display = 'block';
      }
    }

    // ã‚¬ã‚¤ãƒ‰å†…å®¹ã‚’æ›´æ–°
    function updateGuideContent() {
      const isMobile = window.innerWidth <= 768;
      const guideSteps = document.getElementById('guide-steps');

      if (isMobile) {
        // ãƒ¢ãƒã‚¤ãƒ«ç‰ˆã®ã‚¬ã‚¤ãƒ‰
        guideSteps.innerHTML = `
          <div class="step"><span class="step-icon">1</span>
            <div><strong>è¨­å®šï¼š</strong>âš™ï¸ãƒœã‚¿ãƒ³ã‹ã‚‰é€Ÿã•ã‚„é–‹å§‹ä½ç½®ã‚’èª¿æ•´ã—ã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">2</span>
            <div><strong>å†ç”Ÿï¼š</strong>â–¶ãƒœã‚¿ãƒ³ã§å‹•ãã‚’ç¢ºèªã§ãã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">3</span>
            <div><strong>é“è·¯ï¼š</strong>ä¸Šéƒ¨ã«2äººã®ç§»å‹•ãŒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">4</span>
            <div><strong>ç·šåˆ†å›³ï¼š</strong>ä¸­å¤®ã«ç¾åœ¨ã®ä½ç½®é–¢ä¿‚ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">5</span>
            <div><strong>ã‚°ãƒ©ãƒ•ï¼š</strong>ä¸‹éƒ¨ã«è»Œè·¡ã¨2äººã®è·é›¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
          </div>
        `;
      } else {
        // PCç‰ˆã®ã‚¬ã‚¤ãƒ‰
        guideSteps.innerHTML = `
          <div class="step"><span class="step-icon">1</span>
            <div><strong>è¨­å®šï¼š</strong>å·¦å´ã§é€Ÿã•ã‚„é–‹å§‹ä½ç½®ã‚’èª¿æ•´ã—ã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">2</span>
            <div><strong>å†ç”Ÿï¼š</strong>ä¸Šéƒ¨ã®â–¶ãƒœã‚¿ãƒ³ã§å‹•ãã‚’ç¢ºèªã§ãã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">3</span>
            <div><strong>é“è·¯ï¼š</strong>å·¦ä¸Šã«2äººã®ç§»å‹•ãŒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">4</span>
            <div><strong>ç·šåˆ†å›³ï¼š</strong>å·¦ä¸‹ã«ç¾åœ¨ã®ä½ç½®é–¢ä¿‚ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
          </div>
          <div class="step"><span class="step-icon">5</span>
            <div><strong>ã‚°ãƒ©ãƒ•ï¼š</strong>å³å´ã«æ™‚é–“-è·é›¢ã‚°ãƒ©ãƒ•ã¨2äººã®é–“ã®è·é›¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
          </div>
        `;
      }
    }
  </script>
</body>

</html>