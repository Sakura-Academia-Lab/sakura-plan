<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YV5WWWG39Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-YV5WWWG39Z');
  </script>
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-PRPCBPS2');</script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>å›³å½¢ã®ç§»å‹•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ | æ¡œã‚¢ã‚«ãƒ‡ãƒŸã‚¢</title>

  <link rel="stylesheet" href="css/style.css?v=1.3">
</head>

<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PRPCBPS2" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>

  <header id="app-header">
    <div class="header-left">
      <div class="header-controls">
        <button class="btn-play" onclick="startAnimation()">â–¶</button>
        <button class="btn-pause" onclick="pauseAnimation()">â¸</button>
        <button class="btn-reset" onclick="resetAnimation()">â†»</button>
        <select id="time-scale" onchange="updateTimeScale()">
          <option value="0.5">0.5x</option>
          <option value="1" selected>1x</option>
          <option value="2">2x</option>
          <option value="5">5x</option>
        </select>
      </div>
      <h1 class="app-title">å›³å½¢ã®ç§»å‹•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ <small>Ver 1.3</small></h1>
    </div>
    <div class="header-right">
      <button class="btn-help" onclick="toggleGuide()">ğŸ”° ä½¿ã„æ–¹</button>
      <button class="btn-toggle-controls" onclick="toggleControls()" title="è¨­å®šã¯ã“ã“ã‹ã‚‰">âš™ï¸</button>
    </div>
  </header>

  <aside id="controls" class="controls-hidden">
    <!-- å›ºå®šå›³å½¢è¨­å®š -->
    <div class="ctrl-group">
      <label class="ctrl-label" style="color: var(--shape-fixed-color);">å›ºå®šå›³å½¢</label>
      <div class="input-row">
        <label style="min-width: 50px;">ç¨®é¡</label>
        <select id="fixed-shape-type" onchange="updateFixedShapeParams()">
          <option value="rectangle">é•·æ–¹å½¢</option>
          <option value="square">æ­£æ–¹å½¢</option>
          <option value="triangle-right">ç›´è§’ä¸‰è§’å½¢</option>
          <option value="triangle-equilateral">æ­£ä¸‰è§’å½¢</option>
          <option value="triangle-isosceles">äºŒç­‰è¾ºä¸‰è§’å½¢</option>
          <option value="trapezoid">å°å½¢</option>
        </select>
      </div>
      <div id="fixed-shape-params">
        <!-- å‹•çš„ã«ç”Ÿæˆ -->
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">Xä½ç½®</label>
        <input type="number" id="fixed-x" value="300" min="0" max="800" step="10" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">px</span>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">Yä½ç½®</label>
        <input type="number" id="fixed-y" value="100" min="50" max="400" step="10" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">px</span>
      </div>
    </div>

    <!-- ç§»å‹•å›³å½¢è¨­å®š -->
    <div class="ctrl-group">
      <label class="ctrl-label" style="color: var(--shape-moving-color);">ç§»å‹•å›³å½¢</label>
      <div class="input-row">
        <label style="min-width: 50px;">ç¨®é¡</label>
        <select id="moving-shape-type" onchange="updateMovingShapeParams()">
          <option value="rectangle">é•·æ–¹å½¢</option>
          <option value="square">æ­£æ–¹å½¢</option>
          <option value="triangle-right">ç›´è§’ä¸‰è§’å½¢</option>
          <option value="triangle-equilateral">æ­£ä¸‰è§’å½¢</option>
          <option value="triangle-isosceles">äºŒç­‰è¾ºä¸‰è§’å½¢</option>
          <option value="trapezoid">å°å½¢</option>
        </select>
      </div>
      <div id="moving-shape-params">
        <!-- å‹•çš„ã«ç”Ÿæˆ -->
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">åˆæœŸX</label>
        <input type="number" id="moving-initial-x" value="100" min="-200" max="800" step="10" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">px</span>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">Yä½ç½®</label>
        <input type="number" id="moving-y" value="100" min="50" max="400" step="10" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">px</span>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">é€Ÿåº¦</label>
        <input type="number" id="moving-speed" value="50" min="10" max="200" step="10" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">px/ç§’</span>
      </div>
    </div>

    <!-- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š -->
    <div class="ctrl-group">
      <label class="ctrl-label">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</label>
      <div class="input-row">
        <label style="min-width: 60px;">æœ€å¤§æ™‚é–“</label>
        <input type="number" id="max-time" value="10" min="5" max="30" step="1" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">ç§’</span>
      </div>
    </div>
  </aside>

  <div id="animation-area">
    <canvas id="main-canvas"></canvas>
    <div id="info-overlay">
      <p>æ™‚åˆ»: <span id="current-time">0.00</span>ç§’</p>
      <p>é‡ãªã‚Šé¢ç©: <span id="overlap-area">0.00</span> pxÂ²</p>
    </div>
  </div>

  <div id="chart-panel">
    <div class="chart-container">
      <div class="chart-title-vertical">é‡ãªã‚Šé¢ç©ã®å¤‰åŒ–</div>
      <canvas id="area-chart"></canvas>
    </div>
  </div>

  <div id="guide-modal" style="display: none;">
    <div id="guide-overlay" onclick="toggleGuide()"></div>
    <div id="guide-content">
      <button class="btn-close" onclick="toggleGuide()">âœ•</button>
      <h3>ğŸ”° ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h3>
      <div class="step"><span class="step-icon">1</span>
        <div><strong>å›³å½¢é¸æŠï¼š</strong>å›ºå®šå›³å½¢ã¨ç§»å‹•å›³å½¢ã®ç¨®é¡ãƒ»ã‚µã‚¤ã‚ºã‚’é¸æŠã—ã¾ã™ã€‚</div>
      </div>
      <div class="step"><span class="step-icon">2</span>
        <div><strong>å†ç”Ÿï¼š</strong>â–¶ãƒœã‚¿ãƒ³ã§ç§»å‹•å›³å½¢ãŒå·¦ã‹ã‚‰å³ã¸ç§»å‹•ã—ã¾ã™ã€‚</div>
      </div>
      <div class="step"><span class="step-icon">3</span>
        <div><strong>é‡ãªã‚Šï¼š</strong>é‡ãªã£ãŸéƒ¨åˆ†ãŒé»„è‰²ã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
      </div>
      <div class="step"><span class="step-icon">4</span>
        <div><strong>ã‚°ãƒ©ãƒ•ï¼š</strong>ä¸‹å´ã«é‡ãªã‚Šé¢ç©ã®å¤‰åŒ–ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
      </div>
    </div>
  </div>

  <!-- polygon-clipping CDN -->
  <script src="https://cdn.jsdelivr.net/npm/polygon-clipping@0.15.7/dist/polygon-clipping.umd.min.js"></script>

  <script src="js/shape.js?v=1.3"></script>
  <script src="js/polygon-utils.js?v=1.3"></script>
  <script src="js/app.js?v=1.3"></script>
</body>

</html>