/* ===== モバイル専用スタイル ===== */
/* このファイルはmobile.htmlでのみ読み込まれます */

/* 強制的にモバイルレイアウトを適用 */
body {
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  padding-top: calc(88px + 120px); /* ヘッダー + 道路の高さ（縦向き） */
  padding-bottom: 0; /* コントロールパネルは重ならないように */
}

/* 横向き（ランドスケープ）専用レイアウト */
@media (orientation: landscape) {
  body {
    padding-top: 60px !important; /* 横向きはヘッダーのみ */
    overflow: hidden !important; /* 横向きはスクロール不要 */
  }
}

/* ヘッダーを2行に固定 */
#app-header {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 88px !important;
  flex-direction: column !important;
  justify-content: center !important;
  padding: 8px 10px !important;
  gap: 6px !important;
  z-index: 1000 !important;
}

.header-row {
  width: 100% !important;
  gap: 6px !important;
}

.header-row.row-1 {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.15) !important;
  padding-bottom: 6px !important;
}

/* ===== ヘッダーボタン中央寄せの修正 ===== */

/* 1. 縦向き（ポートレート）の Row-2 を確実に中央へ */
.header-row.row-2 {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100% !important;
  margin: 0 auto !important;
}

.header-spacer {
  display: none !important;
}

#app-header h1 {
  font-size: 12px !important;
  flex: 1 !important;
  text-align: left !important;
}

#app-header h1 small {
  font-size: 10px !important;
}

/* 2. 横向き（ランドスケープ）時の3ブロック構造化 */
@media (orientation: landscape) {
  #app-header {
    display: grid !important;

    /* ★ヘッダー幅の調整★
     * 左(タイトル) : 中(ボタン) : 右(余白) の比率
     * 例: 1fr 2fr 1fr = タイトル25% : ボタン50% : 余白25%
     * ボタンを左寄せにしたい場合: 0.5fr 2fr 1.5fr
     * ボタンを右寄せにしたい場合: 1.5fr 2fr 0.5fr
     */
    grid-template-columns: 1fr 2fr 1fr !important;

    align-items: center !important;

    /* ヘッダーの高さ（縦向きは88px、横向きは60px推奨） */
    height: 60px !important;

    /* 上下左右の余白（上下6px、左右10px） */
    padding: 6px 10px !important;

    /* グリッド要素間の間隔（8px推奨） */
    gap: 8px !important;
  }

  /* タイトルエリアを左端に配置 */
  .header-row.row-1 {
    grid-column: 1 !important;         /* 1列目に配置 */
    justify-content: flex-start !important; /* 左寄せ */
    border-bottom: none !important;
    padding-bottom: 0 !important;
  }

  /* ボタンエリアを中央に配置 */
  .header-row.row-2 {
    grid-column: 2 !important;         /* 2列目（中央）に配置 */
    display: flex !important;

    /* ★ボタンの配置調整★
     * center = 中央
     * flex-start = 左寄せ
     * flex-end = 右寄せ
     * space-between = 均等配置（両端揃え）
     * space-around = 均等配置（余白あり）
     */
    justify-content: center !important;

    flex: none !important;             /* flex:1 による押し出しを解除 */
  }

  /* 右側エリア（将来の拡張用） */
  .header-top-btns {
    grid-column: 3 !important;         /* 3列目に配置 */
    display: flex !important;
    justify-content: flex-end !important; /* 右寄せ */
  }

  /* タイトルのフォントサイズ（9px推奨、縦向きは12px） */
  #app-header h1 {
    font-size: 9px !important;
    white-space: nowrap !important;    /* タイトルの改行を防ぐ */
  }

  /* バージョン番号のフォントサイズ（8px推奨、縦向きは10px） */
  #app-header h1 small {
    font-size: 8px !important;
  }
}

/* コントロール切り替えボタンを表示 */
.btn-toggle-controls {
  display: block !important;
}

/* デフォルトでコントロールを非表示 */
#controls.controls-hidden {
  transform: translateY(100%) !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

#controls {
  position: fixed !important;
  top: auto !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 40vh !important;
  border-right: none !important;
  border-top: 1px solid var(--border-color) !important;
  transition: transform 0.3s ease, opacity 0.3s ease !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

/* 【モバイル】道路エリア - 固定表示 */
#animation-area {
  position: fixed !important;
  left: 0 !important;
  right: 0 !important;
  top: 88px !important;
  height: 120px !important;
  bottom: auto !important;
  flex-direction: row !important;
}

/* 横向き: 道路エリアを左側に配置 */
@media (orientation: landscape) {
  #animation-area {
    top: 60px !important;
    left: 0 !important;
    width: 50% !important;
    right: auto !important;
    height: 40% !important;
    border-right: 1px solid var(--border-color) !important;
  }
}

#animation-top {
  flex: 1 !important;
  width: 100% !important;
  height: 100% !important;
}

/* 【モバイル】スクロール可能エリア - 線分図+グラフ */
#animation-bottom {
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 270px !important;
  border-top: 2px solid var(--border-color) !important;
  border-right: none !important;
  background: linear-gradient(to bottom, #87ceeb 0%, #e8f5e9 50%, #d7ccc8 100%) !important;
}

/* 横向き: 線分図を左下に配置 */
@media (orientation: landscape) {
  #animation-bottom {
    position: fixed !important;
    top: calc(60px + 40%) !important;
    left: 0 !important;
    width: 50% !important;
    bottom: 0 !important;
    height: 60% !important;
    border-right: 1px solid var(--border-color) !important;
  }
}

/* 【モバイル】グラフパネル - スクロール可能 */
#chart-panel {
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: auto !important;
  min-height: 600px !important; /* グラフを見やすくするための最小高さ */
  overflow-x: hidden !important;
  border-left: none !important;
  border-top: 1px solid var(--border-color) !important;
  display: flex !important;
  flex-direction: column !important;
  background: #ffffff !important;
  margin-bottom: 20px !important; /* 下部に余白を追加 */
}

/* 横向き: グラフパネルを右側に配置 */
@media (orientation: landscape) {
  #chart-panel {
    position: fixed !important;
    top: 60px !important;
    left: 50% !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 50% !important;
    height: auto !important;
    min-height: 0 !important;
    margin-bottom: 0 !important;
    overflow-y: auto !important;
    border-left: 1px solid var(--border-color) !important;
    border-top: none !important;
  }
}

.chart-container {
  min-height: 300px !important;
  height: auto !important;
  flex: 0 0 auto !important;
}

/* 横向き: グラフを均等に配置 */
@media (orientation: landscape) {
  .chart-container {
    min-height: 0 !important;
    height: 50% !important;              /* グラフの高さ（2つのグラフで50%ずつ） */
    flex: 1 1 50% !important;
  }

  .chart-title-vertical {
    font-size: 11px !important;          /* グラフタイトルのフォントサイズ */
    writing-mode: vertical-rl !important;/* 縦書き表示 */
    white-space: nowrap !important;      /* タイトルの改行を防ぐ */
  }
}

/* タッチ操作改善 */
.header-controls button,
.btn-home,
.btn-help,
.btn-toggle-controls {
  min-width: 40px !important;
  min-height: 36px !important;
  padding: 5px 8px !important;
  font-size: 12px !important;
}

.btn-toggle-controls {
  font-size: 1.2rem !important;
}

input[type="range"] {
  height: 44px !important;
}

input[type="number"],
select {
  min-height: 44px !important;
  font-size: 16px !important;
}

.ctrl-label {
  font-size: 14px !important;
}
