<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YV5WWWG39Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-YV5WWWG39Z');
  </script>
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-PRPCBPS2');</script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>æ—…äººç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ | æ¡œã‚¢ã‚«ãƒ‡ãƒŸã‚¢</title>

  <link rel="stylesheet" href="css/style.css?v=3.2">
</head>

<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PRPCBPS2" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>

  <header id="app-header">
    <div class="header-row row-1">
      <h1 class="app-title">æ—…äººç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ <small>Ver 3.2</small></h1>
      <div class="header-top-btns">
        <button class="btn-help" onclick="toggleGuide()">ğŸ”° ä½¿ã„æ–¹</button>
        <button class="btn-toggle-controls" onclick="toggleControls()" title="è¨­å®šã¯ã“ã“ã‹ã‚‰">âš™ï¸</button>
      </div>
    </div>
    <div class="header-row row-2">
      <div class="people-mode-tabs">
        <button class="tab-btn active" onclick="switchPeopleMode(2)">2äºº</button>
        <button class="tab-btn" onclick="switchPeopleMode(3)">3äºº</button>
      </div>
      <div class="header-controls">
        <button class="btn-play" onclick="startAnimation()">â–¶</button>
        <button class="btn-pause" onclick="pauseAnimation()">â¸</button>
        <button class="btn-reset" onclick="resetAnimation()">â†»</button>
        <select id="time-scale" onchange="updateTimeScale()">
          <option value="0.5">0.5x</option>
          <option value="1" selected>1x</option>
          <option value="2">2x</option>
          <option value="5">5x</option>
        </select>
      </div>
    </div>
  </header>

  <aside id="controls" class="controls-hidden">
    <div class="ctrl-group">
      <label class="ctrl-label">åœ°ç‚¹ç®¡ç†</label>
      <div id="waypoints-list" style="margin-bottom: 8px;">
        <!-- åœ°ç‚¹ãƒªã‚¹ãƒˆãŒå‹•çš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
      </div>
      <button class="btn-add-waypoint" onclick="addWaypoint()"
        style="width: 100%; padding: 8px; font-size: 12px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">
        + åœ°ç‚¹ã‚’è¿½åŠ 
      </button>
    </div>

    <div class="ctrl-group">
      <label class="ctrl-label">å†ç”Ÿæ™‚é–“ (ç§’)</label>
      <div class="input-row">
        <input type="number" id="input-max-time" value="60" min="10" max="300" step="10" onchange="updateSettings()">
        <input type="range" id="range-max-time" min="10" max="300" value="60" step="10" oninput="syncMaxTime()">
      </div>
    </div>

    <div class="ctrl-group">
      <label class="ctrl-label" style="color: var(--person-a-color);">äººç‰©A</label>
      <div class="input-row" style="margin-bottom: 8px;">
        <label style="min-width: 50px;">é€Ÿã•</label>
        <input type="number" id="input-speed-a" value="4" min="1" max="10" step="0.5" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">m/ç§’</span>
      </div>
      <div class="input-row">
        <input type="range" id="range-speed-a" min="1" max="10" value="4" step="0.5" oninput="syncSpeedA()">
      </div>
      <div class="input-row">
        <label style="min-width: 60px; font-size: 11px;">é–‹å§‹åœ°ç‚¹</label>
        <select id="start-waypoint-a" onchange="updateSettings()">
          <!-- åœ°ç‚¹ãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 60px; font-size: 11px;">çµ‚äº†åœ°ç‚¹</label>
        <select id="end-waypoint-a" onchange="updateSettings()">
          <!-- åœ°ç‚¹ãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">å‹•ä½œ</label>
        <select id="mode-a" onchange="toggleIntermittentSettings(); updateSettings();">
          <option value="roundTrip">å¾€å¾©</option>
          <option value="stopAtWaypoint">åœ°ç‚¹ã§åœæ­¢</option>
          <option value="intermittent">é–“æ¬ ç§»å‹•</option>
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 70px; font-size: 11px;">å‡ºä¼šã„æ™‚</label>
        <select id="on-meeting-a" onchange="updateSettings()" disabled>
          <option value="none">æº–å‚™ä¸­</option>
        </select>
      </div>
      <div id="intermittent-a" class="intermittent-settings" style="display: none;">
        <div class="input-row" style="margin-top: 8px;">
          <label style="min-width: 80px; font-size: 11px;">ç§»å‹•æ™‚é–“</label>
          <input type="number" id="work-time-a" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
        <div class="input-row">
          <label style="min-width: 80px; font-size: 11px;">ä¼‘æ†©æ™‚é–“</label>
          <input type="number" id="rest-time-a" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
      </div>
    </div>

    <div class="ctrl-group">
      <label class="ctrl-label" style="color: var(--person-b-color);">äººç‰©B</label>
      <div class="input-row" style="margin-bottom: 8px;">
        <label style="min-width: 50px;">é€Ÿã•</label>
        <input type="number" id="input-speed-b" value="6" min="1" max="10" step="0.5" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">m/ç§’</span>
      </div>
      <div class="input-row">
        <input type="range" id="range-speed-b" min="1" max="10" value="6" step="0.5" oninput="syncSpeedB()">
      </div>
      <div class="input-row">
        <label style="min-width: 60px; font-size: 11px;">é–‹å§‹åœ°ç‚¹</label>
        <select id="start-waypoint-b" onchange="updateSettings()">
          <!-- åœ°ç‚¹ãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 60px; font-size: 11px;">çµ‚äº†åœ°ç‚¹</label>
        <select id="end-waypoint-b" onchange="updateSettings()">
          <!-- åœ°ç‚¹ãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">å‹•ä½œ</label>
        <select id="mode-b" onchange="toggleIntermittentSettings(); updateSettings();">
          <option value="roundTrip">å¾€å¾©</option>
          <option value="stopAtWaypoint">åœ°ç‚¹ã§åœæ­¢</option>
          <option value="intermittent">é–“æ¬ ç§»å‹•</option>
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 70px; font-size: 11px;">å‡ºä¼šã„æ™‚</label>
        <select id="on-meeting-b" onchange="updateSettings()" disabled>
          <option value="none">æº–å‚™ä¸­</option>
        </select>
      </div>
      <div id="intermittent-b" class="intermittent-settings" style="display: none;">
        <div class="input-row" style="margin-top: 8px;">
          <label style="min-width: 80px; font-size: 11px;">ç§»å‹•æ™‚é–“</label>
          <input type="number" id="work-time-b" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
        <div class="input-row">
          <label style="min-width: 80px; font-size: 11px;">ä¼‘æ†©æ™‚é–“</label>
          <input type="number" id="rest-time-b" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
      </div>
    </div>

    <div class="ctrl-group" id="person-c-controls" style="display: none;">
      <label class="ctrl-label" style="color: var(--person-c-color);">äººç‰©C</label>
      <div class="input-row" style="margin-bottom: 8px;">
        <label style="min-width: 50px;">é€Ÿã•</label>
        <input type="number" id="input-speed-c" value="5" min="1" max="10" step="0.5" onchange="updateSettings()">
        <span style="font-size: 11px; color: #666;">m/ç§’</span>
      </div>
      <div class="input-row">
        <input type="range" id="range-speed-c" min="1" max="10" value="5" step="0.5" oninput="syncSpeedC()">
      </div>
      <div class="input-row">
        <label style="min-width: 60px; font-size: 11px;">é–‹å§‹åœ°ç‚¹</label>
        <select id="start-waypoint-c" onchange="updateSettings()">
          <!-- åœ°ç‚¹ãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 60px; font-size: 11px;">çµ‚äº†åœ°ç‚¹</label>
        <select id="end-waypoint-c" onchange="updateSettings()">
          <!-- åœ°ç‚¹ãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 50px;">å‹•ä½œ</label>
        <select id="mode-c" onchange="toggleIntermittentSettings(); updateSettings();">
          <option value="roundTrip">å¾€å¾©</option>
          <option value="stopAtWaypoint">åœ°ç‚¹ã§åœæ­¢</option>
          <option value="intermittent">é–“æ¬ ç§»å‹•</option>
        </select>
      </div>
      <div class="input-row">
        <label style="min-width: 70px; font-size: 11px;">å‡ºä¼šã„æ™‚</label>
        <select id="on-meeting-c" onchange="updateSettings()" disabled>
          <option value="none">æº–å‚™ä¸­</option>
        </select>
      </div>
      <div id="intermittent-c" class="intermittent-settings" style="display: none;">
        <div class="input-row" style="margin-top: 8px;">
          <label style="min-width: 80px; font-size: 11px;">ç§»å‹•æ™‚é–“</label>
          <input type="number" id="work-time-c" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
        <div class="input-row">
          <label style="min-width: 80px; font-size: 11px;">ä¼‘æ†©æ™‚é–“</label>
          <input type="number" id="rest-time-c" value="3" min="1" max="10" step="0.5" onchange="updateSettings()">
          <span style="font-size: 11px; color: #666;">ç§’</span>
        </div>
      </div>
    </div>

  </aside>

  <div id="animation-area">
    <div id="animation-top">
      <canvas id="animation-canvas"></canvas>
    </div>
    <div id="animation-bottom">
      <canvas id="diagram-canvas"></canvas>
    </div>
  </div>

  <div id="chart-panel">
    <div class="chart-container">
      <div class="chart-title-vertical">æ™‚é–“-è·é›¢ã‚°ãƒ©ãƒ•</div>
      <canvas id="time-distance-chart"></canvas>
    </div>
    <div class="chart-container">
      <div class="chart-title-vertical">2äººã®é–“ã®è·é›¢</div>
      <canvas id="distance-diff-chart"></canvas>
    </div>
  </div>

  <div id="guide-modal" style="display: none;">
    <div id="guide-overlay" onclick="toggleGuide()"></div>
    <div id="guide-content">
      <button class="btn-close" onclick="toggleGuide()">âœ•</button>
      <h3>ğŸ”° ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h3>
      <div class="step"><span class="step-icon">1</span>
        <div><strong>è¨­å®šï¼š</strong>é€Ÿã•ã‚„é–‹å§‹ä½ç½®ã‚’èª¿æ•´ã—ã¾ã™ã€‚</div>
      </div>
      <div class="step"><span class="step-icon">2</span>
        <div><strong>å†ç”Ÿï¼š</strong>â–¶ãƒœã‚¿ãƒ³ã§å‹•ãã‚’ç¢ºèªã§ãã¾ã™ã€‚</div>
      </div>
      <div class="step"><span class="step-icon">3</span>
        <div><strong>ã‚°ãƒ©ãƒ•ï¼š</strong>å³å´ã«è»Œè·¡ã¨è·é›¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
      </div>
      <div class="step"><span class="step-icon">4</span>
        <div><strong>ç·šåˆ†å›³ï¼š</strong>å·¦ä¸‹ã«ç¾åœ¨ã®ä½ç½®é–¢ä¿‚ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
      </div>
    </div>
  </div>

  <script src="js/app.js?v=3.2"></script>
</body>

</html>